(this["webpackJsonpgoit-react-hw-09-phonebook"]=this["webpackJsonpgoit-react-hw-09-phonebook"]||[]).push([[0],{51:function(e,t,n){},52:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(24),a=n.n(r),s=(n(51),n(52),n(17)),o=n(5),u=n(12),i=n.n(u),b=n(2),j=Object(b.b)("phonebook/FetchContactRequest"),l=Object(b.b)("phonebook/FetchContactSuccess"),d=Object(b.b)("phonebook/FetchContactError"),O={addContactRequest:Object(b.b)("phonebook/AddContactRequest"),addContactSuccess:Object(b.b)("phonebook/AddContactSuccess"),addContactError:Object(b.b)("phonebook/AddContactError"),deleteContactRequest:Object(b.b)("phonebook/DeleteContactRequest"),deleteContactSuccess:Object(b.b)("phonebook/DeleteContactSuccess"),deleteContactError:Object(b.b)("phonebook/DeleteContactError"),fetchContactRequest:j,fetchContactSuccess:l,fetchContactError:d,changeFilter:Object(b.b)("phonebook/FilteredContact")},h=function(e){return function(t){t(O.addContactRequest()),i.a.post("/contacts",e).then((function(e){var n=e.data;return t(O.addContactSuccess(n))})).catch((function(e){return t(O.addContactError(e.message))}))}},f=function(e){return function(t){t(O.deleteContactRequest()),i.a.delete("/contacts/".concat(e)).then((function(){return t(O.deleteContactSuccess(e))})).catch((function(e){return t(O.deleteContactError(e.message))}))}},p=function(){return function(e){e(O.fetchContactRequest()),i.a.get("/contacts").then((function(t){var n=t.data;return e(O.fetchContactSuccess(n))})).catch((function(t){return e(O.fetchContactError(t.message))}))}},g=n(25),m=function(e){return e.contacts},x=Object(g.a)([function(e){return e.filter},function(e){return e.contacts.items}],(function(e,t){var n=e.toLowerCase();if(t)return t.filter((function(e){return e.name.toLowerCase().includes(n)}))})),C=n(1),v=function(){var e=Object(o.c)(x),t=Object(o.b)();return Object(C.jsx)("ul",{className:"nameList",children:e&&e.map((function(e){var n=e.id,c=e.name,r=e.number;return Object(C.jsxs)("li",{className:"item",children:[Object(C.jsxs)("p",{className:"name",children:[c,": ",r]}),Object(C.jsx)("button",{type:"button",onClick:function(){return function(e){return t(f(e))}(n)},children:"Delete"})]},n)}))})},S=n(43),k=n.n(S),E=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),u=Object(s.a)(a,2),i=u[0],b=u[1],j=Object(o.c)(m),l=Object(o.b)();Object(c.useEffect)((function(){return l(p())}),[l]);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("form",{className:"form",children:[Object(C.jsx)("label",{className:"nameLabel",children:"Name"}),Object(C.jsx)("input",{type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0,onChange:function(e){r({name:e.target.value})},className:"nameInput"}),Object(C.jsx)("label",{className:"numberLabel",children:"Number"}),Object(C.jsx)("input",{type:"tel",name:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:!0,onChange:function(e){b({number:e.target.value})},className:"numberInput"}),Object(C.jsx)("button",{type:"button",onClick:function(){return e={name:n.name,id:k.a.generate(),number:i.number},l(h(e));var e},children:"Add contact"})]}),Object(C.jsx)("h2",{children:"Contacts: "}),Object(C.jsx)("input",{type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0,onChange:function(e){return l(O.changeFilter(e.target.value))},className:"nameFilter"}),j&&Object(C.jsx)(v,{contacts:j})]})},y=n(6),w=function(){return Object(C.jsx)("div",{children:Object(C.jsx)("h1",{children:"\u0414\u043e\u043c\u0430\u0448\u043d\u044f\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430"})})},A=n(13),R=n.n(A),q=n(19),N={registerRequest:Object(b.b)("auth/registerRequest"),registerSuccess:Object(b.b)("auth/registerSuccess"),registerError:Object(b.b)("auth/registerError"),loginRequest:Object(b.b)("auth/loginRequest"),loginSuccess:Object(b.b)("auth/loginSuccess"),loginError:Object(b.b)("auth/loginError"),logoutRequest:Object(b.b)("auth/logoutRequest"),logoutSuccess:Object(b.b)("auth/logoutSuccess"),logoutError:Object(b.b)("auth/logoutError"),getCurrentUserRequest:Object(b.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(b.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(b.b)("auth/getCurrentUserError")};i.a.defaults.baseURL="https://connections-api.herokuapp.com";var U,L,z,I,F,T=function(e){i.a.defaults.headers.common.Authorization="Bearer ".concat(e)},D=function(){i.a.defaults.headers.common.Authorization=""},Z={register:function(e){return function(){var t=Object(q.a)(R.a.mark((function t(n){var c;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(N.registerRequest()),t.prev=1,t.next=4,i.a.post("users/signup",e);case 4:c=t.sent,T(c.data.token),n(N.registerSuccess(c.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(N.registerError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(e){return function(){var t=Object(q.a)(R.a.mark((function t(n){var c;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(N.loginRequest()),t.prev=1,t.next=4,i.a.post("/users/login",e);case 4:c=t.sent,T(c.data.token),n(N.loginSuccess(c.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(N.loginError(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},logOut:function(){return function(){var e=Object(q.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(N.logoutRequest()),e.prev=1,e.next=4,i.a.post("/users/logout");case 4:D(),t(N.logoutSuccess()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(N.loginError(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var e=Object(q.a)(R.a.mark((function e(t,n){var c,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n().authReducer.token){e.next=3;break}return e.abrupt("return");case 3:return T(c),t(N.getCurrentUserRequest()),e.prev=5,e.next=8,i.a.get("/users/current");case 8:r=e.sent,t(N.getCurrentUserSuccess(r.data)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t(N.getCurrentUserError(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}()}},M=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),u=Object(s.a)(a,2),i=u[0],b=u[1],j=Object(c.useState)(""),l=Object(s.a)(j,2),d=l[0],O=l[1],h=Object(o.b)();return Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"}),Object(C.jsxs)("form",{onSubmit:function(e){var t;e.preventDefault(),t={email:n.email,password:i.password,name:d.name},h(Z.register(t)),r(""),b(""),O("")},autoComplete:"off",children:[Object(C.jsxs)("label",{children:["\u0418\u043c\u044f",Object(C.jsx)("input",{type:"text",name:"name",onChange:function(e){O({name:e.target.value})}})]}),Object(C.jsxs)("label",{children:["\u041f\u043e\u0447\u0442\u0430",Object(C.jsx)("input",{type:"email",name:"email",onChange:function(e){r({email:e.target.value})}})]}),Object(C.jsxs)("label",{children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(C.jsx)("input",{type:"password",name:"password",onChange:function(e){b({password:e.target.value})}})]}),Object(C.jsx)("button",{type:"submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]})},B=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),u=Object(s.a)(a,2),i=u[0],b=u[1],j=Object(o.b)(),l=function(){var e=Object(q.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,c={email:n.email,password:i.password},j(Z.logIn(c));case 3:r(""),b("");case 5:case"end":return e.stop()}var c}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(C.jsxs)("div",{children:[Object(C.jsx)("h1",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043b\u043e\u0433\u0438\u043d"}),Object(C.jsxs)("form",{onSubmit:l,autoComplete:"off",children:[Object(C.jsxs)("label",{children:["\u041f\u043e\u0447\u0442\u0430",Object(C.jsx)("input",{type:"email",name:"email",onChange:function(e){r({email:e.target.value})}})]}),Object(C.jsxs)("label",{children:["\u041f\u0430\u0440\u043e\u043b\u044c",Object(C.jsx)("input",{type:"password",name:"password",onChange:function(e){b({password:e.target.value})}})]}),Object(C.jsx)("button",{type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},J=n(15),$={getIsAuthenticated:function(e){return e.authReducer.isAuthenticated},getUserName:function(e){return e.authReducer.user.name}},W=function(){var e=Object(o.c)($.getIsAuthenticated);return Object(C.jsxs)("div",{children:[Object(C.jsx)(J.b,{className:"navLink",to:"/",exact:!0,children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),e&&Object(C.jsx)(J.b,{className:"navLink",to:"/contacts",exact:!0,children:"\u041a\u043d\u0438\u0433\u0430 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043e\u0432"})]})},G=n.p+"static/media/defaultAvatar.0c07a2e4.png",H=function(){var e=Object(o.c)($.getUserName),t=G,n=Object(o.b)(),r=Object(c.useCallback)((function(){return n(Z.logOut())}),[n]);return Object(C.jsxs)("div",{className:"userMenuContainer",children:[Object(C.jsx)("img",{className:"userMenuAvatar",src:t,alt:"",width:"32",height:"32"}),Object(C.jsxs)("span",{className:"userMenuName",children:["Welcome, ",e]}),Object(C.jsx)("button",{className:"btnLogout",type:"button",onClick:r,children:"Logout"})]})},K=function(){return Object(C.jsxs)("div",{children:[Object(C.jsx)(J.b,{className:"navLink",to:"/register",exact:!0,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(C.jsx)(J.b,{className:"navLink",to:"/login",exact:!0,children:"\u0412\u0445\u043e\u0434"})]})},P=function(){var e=Object(o.c)($.getIsAuthenticated);return Object(C.jsxs)("div",{className:"navContainer",children:[Object(C.jsx)(W,{}),e?Object(C.jsx)(H,{}):Object(C.jsx)(K,{})]})},Q=n(16),V=n(27),X=["component","redirectTo"],Y=function(e){var t=e.component,n=e.redirectTo,c=Object(V.a)(e,X),r=Object(o.c)($.getIsAuthenticated);return Object(C.jsx)(y.b,Object(Q.a)(Object(Q.a)({},c),{},{render:function(e){return r?Object(C.jsx)(t,Object(Q.a)({},e)):Object(C.jsx)(y.a,{to:n})}}))},_=["component","redirectTo"],ee=function(e){var t=e.component,n=e.redirectTo,c=Object(V.a)(e,_),r=Object(o.c)($.getIsAuthenticated);return Object(C.jsx)(y.b,Object(Q.a)(Object(Q.a)({},c),{},{render:function(e){return r&&c.restricted?Object(C.jsx)(y.a,{to:n}):Object(C.jsx)(t,Object(Q.a)({},e))}}))},te=function(){var e=Object(o.b)();return Object(c.useEffect)((function(){return e(Z.getCurrentUser())}),[e]),Object(C.jsxs)("div",{className:"App",children:[Object(C.jsx)(P,{}),Object(C.jsxs)(y.d,{children:[Object(C.jsx)(y.b,{exact:!0,path:"/",component:w}),Object(C.jsx)(ee,{path:"/register",restricted:!0,component:M,redirectTo:"/contacts"}),Object(C.jsx)(ee,{path:"/login",restricted:!0,component:B,redirectTo:"/contacts"}),Object(C.jsx)(Y,{path:"/contacts",component:E,redirectTo:"login"})]})]})},ne=n(4),ce=n(28),re=n(44),ae=n.n(re),se=n(18),oe=n(7),ue={name:null,email:null},ie=Object(b.c)(ue,(U={},Object(ne.a)(U,N.registerSuccess,(function(e,t){return t.payload.user})),Object(ne.a)(U,N.loginSuccess,(function(e,t){return t.payload.user})),Object(ne.a)(U,N.logoutSuccess,(function(){return ue})),Object(ne.a)(U,N.getCurrentUserSuccess,(function(e,t){return t.payload})),U)),be=Object(b.c)(null,(L={},Object(ne.a)(L,N.registerSuccess,(function(e,t){return t.payload.token})),Object(ne.a)(L,N.loginSuccess,(function(e,t){return t.payload.token})),Object(ne.a)(L,N.logoutSuccess,(function(){return null})),L)),je=function(e,t){return t.payload},le=Object(b.c)(null,(z={},Object(ne.a)(z,N.registerError,je),Object(ne.a)(z,N.loginError,je),Object(ne.a)(z,N.logoutError,je),Object(ne.a)(z,N.getCurrentUserError,je),z)),de=Object(b.c)(!1,(I={},Object(ne.a)(I,N.registerSuccess,(function(){return!0})),Object(ne.a)(I,N.loginSuccess,(function(){return!0})),Object(ne.a)(I,N.getCurrentUserSuccess,(function(){return!0})),Object(ne.a)(I,N.logoutSuccess,(function(){return!1})),Object(ne.a)(I,N.registerError,(function(){return!1})),Object(ne.a)(I,N.loginError,(function(){return!1})),Object(ne.a)(I,N.getCurrentUserError,(function(){return!1})),I)),Oe=Object(oe.b)({user:ie,token:be,error:le,isAuthenticated:de}),he=n(45),fe=n.n(he),pe=Object(b.c)([],(F={},Object(ne.a)(F,O.fetchContactSuccess,(function(e,t){return{items:t.payload}})),Object(ne.a)(F,O.addContactSuccess,(function(e,t){var n=e.items,c=t.payload;return{items:[].concat(Object(ce.a)(n),[c])}})),Object(ne.a)(F,O.deleteContactSuccess,(function(e,t){var n=e.items,c=t.payload;return{items:Object(ce.a)(n.filter((function(e){return e.id!==c})))}})),F)),ge=Object(b.c)("",Object(ne.a)({},O.changeFilter,(function(e,t){return t.payload}))),me=[].concat(Object(ce.a)(Object(b.d)({serializableCheck:{ignoredActions:[se.a,se.f,se.b,se.c,se.d,se.e]}})),[ae.a]),xe={key:"auth",storage:fe.a,whitelist:["token"]},Ce=Object(b.a)({reducer:{authReducer:Object(se.g)(xe,Oe),contacts:pe,filter:ge},middleware:me,devTools:!1}),ve={store:Ce,persistor:Object(se.h)(Ce)},Se=n(46);a.a.render(Object(C.jsx)(o.a,{store:ve.store,children:Object(C.jsx)(Se.a,{loading:null,persistor:ve.persistor,children:Object(C.jsx)(J.a,{children:Object(C.jsx)(te,{})})})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.ee6f26a7.chunk.js.map